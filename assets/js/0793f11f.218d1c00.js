"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6638],{5389:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var t=i(4848),r=i(8453);const s={title:"Header De-Identification",id:"Header De-Identification",description:"An SOP for Header De-Identification"},d="Awaiting Approval",l={id:"Imaging-Data/Header De-Identification",title:"Header De-Identification",description:"An SOP for Header De-Identification",source:"@site/docs/Imaging-Data/Header De-Identification.mdx",sourceDirName:"Imaging-Data",slug:"/Imaging-Data/Header De-Identification",permalink:"/Chorus_SOP/docs/Imaging-Data/Header De-Identification",draft:!1,unlisted:!1,editUrl:"https://github.com/chorus-ai/Chorus_SOP/edit/review/sop-website/docs/Imaging-Data/Header De-Identification.mdx",tags:[],version:"current",lastUpdatedBy:"Jared Houghtaling",lastUpdatedAt:1761679271,formattedLastUpdatedAt:"Oct 28, 2025",frontMatter:{title:"Header De-Identification",id:"Header De-Identification",description:"An SOP for Header De-Identification"},sidebar:"sopSidebar",previous:{title:"Imaging Data",permalink:"/Chorus_SOP/docs/category/imaging-data"},next:{title:"Imaging Data",permalink:"/Chorus_SOP/docs/Imaging-Data/"}},o={},c=[];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"awaiting-approval",children:"Awaiting Approval"}),"\n",(0,t.jsx)(n.h1,{id:"materials-and-equipment",children:"Materials and Equipment"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Python 3.x and Pydicom package (need installation)"}),"\n",(0,t.jsx)(n.li,{children:"RSNA CTP software (included in the package)"}),"\n",(0,t.jsx)(n.li,{children:"Lookup tables: image_map.csv, personal_map.csv, see /pydicom/lookup_table/ for templates"}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"procedures",children:"Procedures"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"STEP 1: De-Identification using Pydicom Script"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Preparation"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure lookup tables (image_map.csv, personal_map.csv) are available in the lookup directory."}),"\n",(0,t.jsx)(n.li,{children:"Install dependencies:\npip install pydicom"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Execution"})}),"\n",(0,t.jsx)(n.p,{children:"Run the de-identification script:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python pydicom_deid.py --map_table_dir <lookup_table_dir> --input_dir\n<DICOM_input_root_dir> --output_dir <DICOM_output_root_dir> 2>&1 | tee logs.txt\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Input Parameters"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<lookup_table_dir>"}),": Path to lookup CSVs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<DICOM_input_root_dir>"}),": Input DICOM directory, organized by patient"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<DICOM_output_root_dir>"}),": Output directory for processed files"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Output Subfolders:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"dicom_processed/: De-identified files"}),"\n",(0,t.jsx)(n.li,{children:"dicom_unprocessed/: Files skipped due to missing PatientID/AccessionNumber or improper tag type"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Metadata Shift Tags:"})}),"\n",(0,t.jsx)(n.p,{children:"Refer to the manual for the complete list of DICOM data tags that will be shifted by a ptient-specific offset."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"STEP 2: De-Identification using RSNA CTP Software"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Installation"})}),"\n",(0,t.jsx)(n.p,{children:"Launch the installer to Install RSNA CTP in the desired directory."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"CTP-installer.jar"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Configuration"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Modify config.xml:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Update root and treeRoot paths"}),"\n",(0,t.jsx)(n.li,{children:"Adjust server settings (port, maxThreads) if needed"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Copy scripts into/scripts directory:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"DicomAnonymizer_chorus.scipt"}),"\n",(0,t.jsx)(n.li,{children:"DicomFilter.script"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Pipeline Overview"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ArchiveImportService"}),": Reads and imports DICOM files"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DicomFilter"}),": Filters modalities (CR, DX, MG, CT, MR)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"IDMap"}),": Maps UID elements"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DicomAnonymizer"}),": De-identifies metadata"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DirectoryStorageService"}),": Saves output in organized folder structure"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Execution"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Launch CTP using Launcher.jar"}),"\n",(0,t.jsxs)(n.li,{children:['In the UI, under the "General" tab, click ',(0,t.jsx)(n.strong,{children:"Start"})," to begin processing"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Stop"})," to halt the pipeline when needed"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Output Folder Structure:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"roots/: De-identified DICOM files and mapping files"}),"\n",(0,t.jsx)(n.li,{children:"quarantines/: Problematic files"}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"reference-materials",children:"Reference Materials"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Can reference manual here"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var t=i(6540);const r={},s=t.createContext(r);function d(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);