"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6492],{8001:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var i=n(4848),o=n(8453);const s={title:"Freetext Data",id:"Freetext Data",description:"An SOP for processing freetext information in clinical notes"},r="Awaiting Approval",a={id:"Freetext-Data/Freetext Data",title:"Freetext Data",description:"An SOP for processing freetext information in clinical notes",source:"@site/docs/Freetext-Data/Freetext-Data.mdx",sourceDirName:"Freetext-Data",slug:"/Freetext-Data/",permalink:"/Chorus_SOP/docs/Freetext-Data/",draft:!1,unlisted:!1,editUrl:"https://github.com/chorus-ai/Chorus_SOP/edit/review/sop-website/docs/Freetext-Data/Freetext-Data.mdx",tags:[],version:"current",lastUpdatedBy:"Polina Talapova",lastUpdatedAt:1770295983,formattedLastUpdatedAt:"Feb 5, 2026",frontMatter:{title:"Freetext Data",id:"Freetext Data",description:"An SOP for processing freetext information in clinical notes"},sidebar:"sopSidebar",previous:{title:"Freetext Data",permalink:"/Chorus_SOP/docs/category/freetext-data"},next:{title:"GIS Exposure Data",permalink:"/Chorus_SOP/docs/category/gis-exposure-data"}},l={},d=[{value:"1. Purpose",id:"1-purpose",level:2},{value:"2. Scope",id:"2-scope",level:2},{value:"3. Definitions",id:"3-definitions",level:2},{value:"4. Roles and Responsibilities",id:"4-roles-and-responsibilities",level:2},{value:"5. Materials Needed",id:"5-materials-needed",level:2},{value:"6. Procedures",id:"6-procedures",level:2},{value:"6.1. <strong>Initial Data Extration</strong>",id:"61-initial-data-extration",level:3},{value:"6.2. <strong>Pipeline Setup</strong>",id:"62-pipeline-setup",level:3},{value:"6.3. Task Setup",id:"63-task-setup",level:3},{value:"6.4. Data Formatting for OMOP CDM",id:"64-data-formatting-for-omop-cdm",level:3},{value:"6.5. De-identifcation (Optional)",id:"65-de-identifcation-optional",level:3},{value:"7. Quality Control (QC) Procedures",id:"7-quality-control-qc-procedures",level:2},{value:"8. Documentation and Storage",id:"8-documentation-and-storage",level:2},{value:"9. Deviations from the SOP",id:"9-deviations-from-the-sop",level:2},{value:"10. Revision History",id:"10-revision-history",level:2}];function c(e){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"awaiting-approval",children:"Awaiting Approval"}),"\n",(0,i.jsx)(t.h2,{id:"1-purpose",children:"1. Purpose"}),"\n",(0,i.jsx)(t.p,{children:"This SOP provides guidelines for the extraction, processing, and handling of freetext data within CHoRUS. It ensures that only tokenized versions of notes are used, preserving clinical insights while maintaining data privacy."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"2-scope",children:"2. Scope"}),"\n",(0,i.jsx)(t.p,{children:"This SOP applies to data engineers, data scientists, and analysts responsible for processing unstructured clinical text data. It defines the procedures to extract structured information from clinical notes while ensuring compliance with CHoRUS data standards."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"3-definitions",children:"3. Definitions"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Tokenization: The process of extracting clinical entities (e.g., Diagnoses, Procedures, Medications) along with metadata (e.g., Document ID, OMOP Concept Code, negation, certainty)."}),"\n",(0,i.jsx)(t.li,{children:"NOTE_NLP Table: The final structured output conforming to the OHDSI OMOP 5.4 Common Data Model (CDM) containing requested tokens and linkage to the NOTE table."}),"\n",(0,i.jsx)(t.li,{children:"NOTE Table: The final structured output conforming to the OHDSI OMOP 5.4 Common Data Model (CDM) containing linkage information to PERSON and VISIT_OCCURRENCE tables."}),"\n",(0,i.jsx)(t.li,{children:"De-identification: The process of removing protected health information (PHI) from text data to generate a limited or safe harbor dataset."}),"\n",(0,i.jsx)(t.li,{children:"OHNLPTK: The CHoRUS-approved NLP pipeline for processing freetext clinical notes."}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"4-roles-and-responsibilities",children:"4. Roles and Responsibilities"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Data Engineer: Implements the NLP pipeline and ensures the correct formatting of extracted data."}),"\n",(0,i.jsx)(t.li,{children:"Data Analyst: Validates the tokenized outputs and ensures compliance with OMOP CDM requirements."}),"\n",(0,i.jsx)(t.li,{children:"Quality Control (QC) Analyst: Reviews the processed data to confirm completeness and accuracy."}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"5-materials-needed",children:"5. Materials Needed"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Access to structured Electronic Health Record (EHR) data."}),"\n",(0,i.jsx)(t.li,{children:"Notes and reports to be included with this data submission include Admission (H&P), Emergency, Progress notes, Consultation, Procedure and Operative reports, Discharge Summaries, Radiology, US and ECHO reports. Notes from clinical and non-clinical ancillary services should be included, if available.This information is also available in the Data Request SOP."}),"\n",(0,i.jsx)(t.li,{children:"Access to unstructured clinical notes for tokenization."}),"\n",(0,i.jsx)(t.li,{children:"NLP pipeline tools (OHNLPTK) and associated documentation."}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"6-procedures",children:"6. Procedures"}),"\n",(0,i.jsxs)(t.h3,{id:"61-initial-data-extration",children:["6.1. ",(0,i.jsx)(t.strong,{children:"Initial Data Extration"})]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Generate a list of patients form structured EHR data"}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Extract clincical notes and reports within the corresponding admission and discharge dates"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.h3,{id:"62-pipeline-setup",children:["6.2. ",(0,i.jsx)(t.strong,{children:"Pipeline Setup"})]}),"\n",(0,i.jsxs)(t.p,{children:['Installation instructions can be found under the "Meetings Recordings" folder located at ',(0,i.jsx)(t.a,{href:"https://drive.google.com/drive/folders/1bDBSF2pkx50kTyTXmWJYt1Ta6pgwh4HH?dmr=1&ec=wgc-drive-globalnav-goto",children:"https://drive.google.com/drive/folders/1bDBSF2pkx50kTyTXmWJYt1Ta6pgwh4HH?dmr=1&ec=wgc-drive-globalnav-goto"}),"  . Specifically, the Week 3 \u201cOHNLP Toolkit Installation Instructions\u201d video will walk you through setting up the framework. Instructions in text form are reproduced below:"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Clone teh OHNLPTK repository: git clone\n",(0,i.jsx)(t.a,{href:"https://www.github.com/OHNLP/OHNLPTK_SETUP.git",children:"https://www.github.com/OHNLP/OHNLPTK_SETUP.git"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"In the resulting folder, run installation script: install_and_update_ohnlptk.sh"}),"\n",(0,i.jsx)(t.li,{children:"Configure the backbone: run_backbone_configurator.sh, selecting CSV output for initial testing"}),"\n",(0,i.jsx)(t.li,{children:"Execute teh pipeline: ./run_pipeline_local.sh, adjusting configuration settings as necessary"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"63-task-setup",children:"6.3. Task Setup"}),"\n",(0,i.jsx)(t.p,{children:"To configure OHNLPTK to run the general clinical dictionary as used for this step, additional steps must be taken. Please refer to the \u201cTask 1 materials\u201d subfolder of the google drive. Instructions reproduced here for clarity (you will need to download a file from the google drive after confirming you have a UTS/UMLS license)"}),"\n",(0,i.jsx)(t.p,{children:"In your NLP pipeline configuration (make a copy first if desired):"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Under the \u201cMedTagger NLP\u201d component, change the following settings:","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Configuration Item \u201cWhether to use IE or dictionary-based rulesets\u2026\u201d"}),"\n",(0,i.jsx)(t.li,{children:"Change to \u201cSTANDALONE_DICT_ONLY\u201d"}),"\n",(0,i.jsx)(t.li,{children:"Configuration Item \u201cThe ruleset definition\u2026\u201d"}),"\n",(0,i.jsx)(t.li,{children:"Change to \u201cOHNLP_General_OHDSI.lookup.dict\u201d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["Under the \u201cMedTagger to OHDSI OMOP CDM Format\u201d component, change the following settings:","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Configuration Item \u201cThe ruleset folder\u2026\u201d"}),"\n",(0,i.jsx)(t.li,{children:"Change to \u201cNONE\u201d, if not already so"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"Download OHNLP_General_OHDSI.lookup.dict from the same folder as this document and place in the \u201cresources\u201d folder within your backbone install"}),"\n",(0,i.jsx)(t.li,{children:"Run!"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"64-data-formatting-for-omop-cdm",children:"6.4. Data Formatting for OMOP CDM"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Convert extracted tokens into OMOP-compatible format."}),"\n",(0,i.jsxs)(t.li,{children:["Store structured outputs in the NOTE_NLP table of the OMOP 5.4 CDM.","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"The output of the OHNLP tool resembles, but does not exactly match, the CDM - update the NOTE_NLP table to match where necessary before submitting, including removing the matched_text and matched_sentence fields."}),"\n",(0,i.jsx)(t.li,{children:"Leave the snippet and lexical_variant fields blank in the NOTE_NLP table."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"Store linkage information, leaving the note_text field empty, in the NOTE table of the OMOP 5.4 CDM."}),"\n",(0,i.jsxs)(t.li,{children:["Validate data consistency against CHoRUS data standards. ",(0,i.jsx)(t.a,{href:"http://ohdsi.github.io/CommonDataModel/cdm54.html#NOTE_NLP",children:"http://ohdsi.github.io/CommonDataModel/cdm54.html#NOTE_NLP"}),", ",(0,i.jsx)(t.a,{href:"http://ohdsi.github.io/CommonDataModel/cdm54.html#NOTE",children:"http://ohdsi.github.io/CommonDataModel/cdm54.html#NOTE"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"There should be a single NOTE_NLP table per upload with data from all visit_occurrences."}),"\n",(0,i.jsx)(t.li,{children:"There should be a single NOTE table, where the note_text field is left empty, but does allow linkage to other OMOP table."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"65-de-identifcation-optional",children:"6.5. De-identifcation (Optional)"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Investigators may apply site-specific de-identification methods before running NLP."}),"\n",(0,i.jsx)(t.li,{children:"If de-identification is applied, ensure that offsets remain consistent with structured data."}),"\n",(0,i.jsxs)(t.li,{children:["Reference CHoRUS de-identification guidelines: ",(0,i.jsx)(t.a,{href:"https://github.com/chorus-ai/deidentification_notes/wiki/De%E2%80%90Identification-To%E2%80%90Dos",children:"https://github.com/chorus-ai/deidentification_notes/wiki/De%E2%80%90Identification-To%E2%80%90Dos"})]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"IMPORTANT"}),": Please note that if you are planning on running de-identification and reusing the generated output in conjunction with NLP output, NLP must be run on the de-identified/resynthesized text, not the original, as otherwise offsets will be incorrect."]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"7-quality-control-qc-procedures",children:"7. Quality Control (QC) Procedures"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Sample Validation: Verify extracted tokens for a subset of notes (10). As a guideline, there should be at least as many tokens as words in the note. It is recommended that various types of notes are chosen."}),"\n",(0,i.jsx)(t.li,{children:"Consistency Check: Confirm metadata integrity (e.g., date alignment, OMOP Concept Codes)."}),"\n",(0,i.jsx)(t.li,{children:"Compliance Review: Ensure adherence to CHoRUS guidelines."}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"8-documentation-and-storage",children:"8. Documentation and Storage"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Maintain logs of NLP pipeline runs, including configuration changes."}),"\n",(0,i.jsx)(t.li,{children:"Store processed data securely in compliance with institutional policies."}),"\n",(0,i.jsx)(t.li,{children:"Ensure version control of extracted datasets."}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"9-deviations-from-the-sop",children:"9. Deviations from the SOP"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Any deviations must be documented, justified, and approved by CHoRUS Data Acquisition and Standards governance."}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"10-revision-history",children:"10. Revision History"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Version"}),(0,i.jsx)(t.th,{children:"Date"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"1.0"}),(0,i.jsx)(t.td,{children:"2025-04-07"}),(0,i.jsx)(t.td,{children:"Initial version"})]})})]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(6540);const o={},s=i.createContext(o);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);