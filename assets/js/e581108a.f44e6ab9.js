"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[294],{4397:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>o});var t=i(4848),s=i(8453);const a={title:"Imaging Data",id:"Imaging Data",description:"An SOP for processing medical images"},r="Awaiting Approval",d={id:"Imaging-Data/Imaging Data",title:"Imaging Data",description:"An SOP for processing medical images",source:"@site/docs/Imaging-Data/Imaging-Data.mdx",sourceDirName:"Imaging-Data",slug:"/Imaging-Data/",permalink:"/Chorus_SOP/docs/Imaging-Data/",draft:!1,unlisted:!1,editUrl:"https://github.com/chorus-ai/Chorus_SOP/edit/review/sop-website/docs/Imaging-Data/Imaging-Data.mdx",tags:[],version:"current",lastUpdatedBy:"Polina Talapova",lastUpdatedAt:1770295983,formattedLastUpdatedAt:"Feb 5, 2026",frontMatter:{title:"Imaging Data",id:"Imaging Data",description:"An SOP for processing medical images"},sidebar:"sopSidebar",previous:{title:"Header De-Identification",permalink:"/Chorus_SOP/docs/Imaging-Data/Header De-Identification"},next:{title:"Multimodal Linkage",permalink:"/Chorus_SOP/docs/category/multimodal-linkage"}},l={},o=[];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"awaiting-approval",children:"Awaiting Approval"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Before merging an approved SOP, the contributor should change this header from ",(0,t.jsx)(n.code,{children:"Awaiting Approval"})," to ",(0,t.jsx)(n.code,{children:"Approved"})]}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"imaging-sop",children:"Imaging SOP"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/chorus-ai/Chorus_SOP/commits/review-imaging/sop-website/docs/Imaging-Data/review-imaging.mdx",children:"Version History"})}),"\n",(0,t.jsx)(n.h1,{id:"purpose",children:"Purpose"}),"\n",(0,t.jsx)(n.p,{children:"Guidance for Data Acquisition Sites regarding imaging data processing, harmonization, and upload"}),"\n",(0,t.jsx)(n.h1,{id:"procedures",children:"Procedures"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Data Preparation"}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Identify data extraction partners and methods (e.g., CTSI)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Identify the sources of the data (e.g., PACS, site research repository)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Determine which image modalities would need to be extracted, date range, and size"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Confirm the type of data format you will receive (e.g., DICOM). DICOM is the target format for CHORUS)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Confirm the type of IDs used to link this data to the patient (e.g., name) or other hospital ID (e.g., MRN), procedure codes, and time shifting => refer to Standards SOP on data linkage and date shifting. Linkage ID\na)\tAccession number = OMOP: image_occurrence_id\nb)\tProcedure number = OMOP: procedure_occurrence_id"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Ensure accession numbers for specific image tests are part of the encounters of interest. The preferred method is using EHR search to filter tests based on encounter (e.g., CDW) and not pulling directly from PACS based on the patient identifiers. This is to simplify image test mapping to the primary encounter of interest for the multimodal data pull."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Map header metadata relevant to your local site with header metadata selected by CHORUS (list of metadata fields below). Refer to points 12 and 13 for look up tale specifics for the deidentification tool. Having the RSNA LOINC codes specifying the type of study would be useful to include. Imaging studies should have a corresponding entry in the PROCEDURE_OCCURENCE OMOP table. Thus, imaging studies can be linked to the rest of the data using the procedure_occurence_id field. Refer to multimodal linkage SOP on specifics about linking images to the other data: ",(0,t.jsx)(n.a,{href:"https://chorus-ai.github.io/Chorus_SOP/docs/Multimodal-Linkage/",children:"https://chorus-ai.github.io/Chorus_SOP/docs/Multimodal-Linkage/"})," . For date shifting, please refer to the  Date Shifting SOP."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Study Level:\nAccessionNumber\nStudyDescription\nStudyInstanceUID\nModality\nStudyDate\nManufacturer\nManufacturersModelName\nStudyTime\nMagneticFieldStrength\nBodyPartExamined\nRadiopharmaceutical\nContrastBolusAgent\nContrastBolusRoute"}),"\n",(0,t.jsx)(n.p,{children:"Series Level:\nSeriesDescription\nSeriesInstanceUID\nSliceThickness\nViewPosition\nImageLaterality\nImagesinAcquisition\nTransducerType\nTransducerFrequency\nSeriesNumber"}),"\n",(0,t.jsx)(n.p,{children:"Image Level:\nN/A"}),"\n",(0,t.jsxs)(n.ol,{start:"8",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Identify metadata not covered by CHORUS that would be relevant to your site locally."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Pursue local data quality review (e.g., data missingness)."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Identifiable cross-walk table creation (stays local): maps all original DICOM metadata fields to the deidentification procedure (e.g., replacement, erase, etc) and the new field in the deidentified DICOM, so this can be used as a crosswalk (crosswalk table stays local at the site and is not shared). Refer to points 12 and 13 below based on DICOM deidentification status in your site."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Deidentified DICOM metadata tables (for sharing): to enable imaging data querying without loading DICOM data."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"DICOM with metadata already deidentified at your local site (skip to #13 if you do not have data already deidentified): DICOM files can be shared if the site already has an approved solution that may or may not require pixel deidentification, but you should still use the CHORUS-specific CTP version to process your data consistently."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/chorus-ai/CTP-deid/tree/main",children:"https://github.com/chorus-ai/CTP-deid/tree/main"})}),"\n",(0,t.jsx)(n.li,{children:'You will need to prepare lookup tables: "image_map.csv" and "personal_map.csv" \u2014 examples in CHoRUS_metadata_deid_instruction/pydicom/loopup_table/\nPatientID and AccessionNumber in the DICOM metadata are replaced by person_id and image_occurrence_id from the OMOP table.\nSelected data tags (see repository Table 1) are shifted by a predefined number of days (specific to each PatientID). Ensure this shift is consistent across EHR and waveform data'}),"\n",(0,t.jsx)(n.li,{children:"You will first need to run a pydicom script for wrangling these lookup tables and then run the CTP tool"}),"\n",(0,t.jsxs)(n.li,{children:["For CTP set up instructions, contact Xiang Li, PhD: ",(0,t.jsx)(n.a,{href:"mailto:XLI60@mgh.harvard.edu",children:"XLI60@mgh.harvard.edu"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"13",children:["\n",(0,t.jsx)(n.li,{children:"DICOM with metadata that needs deidentification: You should use the CHORUS-specific CTP tool."}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/chorus-ai/CTP-deid/tree/main",children:"https://github.com/chorus-ai/CTP-deid/tree/main"})}),"\n",(0,t.jsx)(n.li,{children:'You will need to prepare lookup tables: "image_map.csv" and "personal_map.csv" \u2014 examples in CHoRUS_metadata_deid_instruction/pydicom/loopup_table/\nPatientID and AccessionNumber in the DICOM metadata are replaced by person_id and image_occurrence_id from the OMOP table.\nSelected data tags (see repository Table 1) are shifted by a predefined number of days (specific to each PatientID). Ensure this shift is consistent across EHR and waveform data'}),"\n",(0,t.jsx)(n.li,{children:"You will first need to run a pydicom script for wrangling these lookup tables and then run the CTP tool"}),"\n",(0,t.jsxs)(n.li,{children:["For CTP set up instructions, contact Xiang Li, PhD: ",(0,t.jsx)(n.a,{href:"mailto:XLI60@mgh.harvard.edu",children:"XLI60@mgh.harvard.edu"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"14",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Test deidentified DICOM readability: load file in Horos/Osirix to ensure that DICOM can open"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Folder and file structure and naming: ensure folder structure and naming follow this structure:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The Images folder should contain all images for the patient, with images organized in the standard DICOM hierarchy with study/series folders."}),"\n",(0,t.jsx)(n.p,{children:"Folder and File names should follow the format below:"}),"\n",(0,t.jsx)(n.p,{children:"Patient Identification: Typically includes a de-identified person ID.\nStudy Id: The study Id, may be a de-identified version of DICOM tags StudyInstanceUID or StudyId.\nSeries Id: The series Id, may be a de-identified version of DICOM tags SeriesInstanceUID or SeriesNumber.\nModality: Refers to the type of equipment used for the scan, such as MR (Magnetic Resonance), CT (Computed Tomography), XR (X-ray), or US (Ultrasound).\nInstance Number: Represents the specific image number within a series."}),"\n",(0,t.jsx)(n.p,{children:"Optional: Inclusion of patient id, study id, and series id in the filename helps to recover orphaned files but is optional."}),"\n",(0,t.jsx)(n.p,{children:"Example of a DICOM Image folder and filenames\nroot\n\u251c\u2500\u2500 10001001\n\u251c\u2500\u2500 Images\n\u251c\u2500\u2500 1234\n\u251c\u2500\u2500 5678\n\u251c\u2500\u2500 10001001_1234_5678_CT_000.dcm\n\u251c\u2500\u2500 10001001_1234_5678_CT_001.dcm\n\u251c\u2500\u2500 10001001_1234_5678_CT_002.dcm\n...\nThis example would represent a CT scan for patient 1000100020 with Study Id 1234 and Series Id 5678. This image is the first in that series. Please Make sure that these fields match the dicom metadata tags."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"DICOM Tags Recommended to Keep"})}),"\n",(0,t.jsx)(n.p,{children:"Image Identity & Structure"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Modality: 0008, 0060"}),"\n",(0,t.jsx)(n.li,{children:"Manufacturer: 0008, 0070"}),"\n",(0,t.jsx)(n.li,{children:"Instance Number: 0020, 0013"}),"\n",(0,t.jsx)(n.li,{children:"Image Position (Patient): 0020, 0032"}),"\n",(0,t.jsx)(n.li,{children:"Image Orientation (Patient): 0020, 0037"}),"\n",(0,t.jsx)(n.li,{children:"Slice Location: 0020, 1041"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Image Geometry & Spatial Resolution"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Rows: 0028, 0010"}),"\n",(0,t.jsx)(n.li,{children:"Columns: 0028, 0011"}),"\n",(0,t.jsx)(n.li,{children:"Pixel Spacing: 0028, 0030"}),"\n",(0,t.jsx)(n.li,{children:"Slice Thickness: 0018, 0050"}),"\n",(0,t.jsx)(n.li,{children:"Spacing Between Slices:  0018, 0088"}),"\n",(0,t.jsx)(n.li,{children:"Photometric Interpretation: 0028, 0004"}),"\n",(0,t.jsx)(n.li,{children:"Bits Allocated: 0028, 0100"}),"\n",(0,t.jsx)(n.li,{children:"Bits Stored: 0028, 0101"}),"\n",(0,t.jsx)(n.li,{children:"High Bit: 0028, 0102"}),"\n",(0,t.jsx)(n.li,{children:"Pixel Representation: 0028, 0103"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Pixel Data & Intensity Interpretation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Window Center: 0028, 1050"}),"\n",(0,t.jsx)(n.li,{children:"Window Width: 0028, 1051"}),"\n",(0,t.jsx)(n.li,{children:"Rescale Intercept: 0028, 1052"}),"\n",(0,t.jsx)(n.li,{children:"Rescale Slope: 0028, 1053"}),"\n",(0,t.jsx)(n.li,{children:"Rescale Type: 0028, 1054"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Modality-Specific Acquisition Parameters"}),"\n",(0,t.jsx)(n.p,{children:"X-ray"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"KVP: 0018, 0060"}),"\n",(0,t.jsx)(n.li,{children:"X-Ray Tube Current: 0018, 1151"}),"\n",(0,t.jsx)(n.li,{children:"Exposure: 0018, 1152"}),"\n",(0,t.jsx)(n.li,{children:"Exposure in \xb5As: 0018, 1153"}),"\n",(0,t.jsx)(n.li,{children:"Exposure Time: 0018, 1150"}),"\n",(0,t.jsx)(n.li,{children:"Focal Spot(s): 0018, 1190"}),"\n",(0,t.jsx)(n.li,{children:"Filter Type: 0018, 7050"}),"\n",(0,t.jsx)(n.li,{children:"Filter Thickness Minimum: 0018, 7052"}),"\n",(0,t.jsx)(n.li,{children:"Filter Thickness Maximum: 0018, 7054"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"CT"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"KVP: 0018, 0060"}),"\n",(0,t.jsx)(n.li,{children:"X-Ray Tube Current: 0018, 1151"}),"\n",(0,t.jsx)(n.li,{children:"Exposure: 0018, 1152"}),"\n",(0,t.jsx)(n.li,{children:"Convolution Kernel: 0018, 1210"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"MRI"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scanning Sequence: 0018, 0020"}),"\n",(0,t.jsx)(n.li,{children:"Sequence Variant: 0018, 0021"}),"\n",(0,t.jsx)(n.li,{children:"Scan Options: 0018, 0022"}),"\n",(0,t.jsx)(n.li,{children:"Repetition Time: 0018, 0080"}),"\n",(0,t.jsx)(n.li,{children:"Echo Time: 0018, 0081"}),"\n",(0,t.jsx)(n.li,{children:"Magnetic Field Strength: 0018, 0087"}),"\n",(0,t.jsx)(n.li,{children:"Flip Angle: 0018, 1314"}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"DICOM Pixel de-identification"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"under development"}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"DICOM defacing"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"under development"}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Data Upload to Azure"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"refer to Azure data upload SOP"}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"reference-materials",children:"Reference Materials"}),"\n",(0,t.jsxs)(n.p,{children:["RSNA CTP Documentation:\n",(0,t.jsx)(n.a,{href:"https://mircwiki.rsna.org/index.php?title=MIRC_CTP",children:"https://mircwiki.rsna.org/index.php?title=MIRC_CTP"})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>d});var t=i(6540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);