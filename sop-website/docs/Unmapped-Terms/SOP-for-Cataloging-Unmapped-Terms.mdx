---
title: SOP for Cataloging Unmapped Terms
id: SOP-CUT
description:  A template for preparing SOP for Cataloging Unmapped Terms
---

# Awaiting Approval

# SOP for Cataloging Unmapped Terms
[Version History](https://github.com/chorus-ai/Chorus_SOP/commits/review-unmapped-terms/sop-website/docs/Unmapped-Terms/SOP-for-Cataloging-Unmapped-Terms.mdx)

# Background
The research consortium aims to collect and unify rich multimodal data from fifteen contributing sites to support advanced machine learning and artificial intelligence analyses. Consolidating this complex data and providing analytical support is a challenging task that requires diverse expertise, including the development of consortium-specific OMOP concepts to manage multimodal files, such as images and waveforms, alongside datasets structured in the OMOP CDM format.
This Standard Operating Procedure (SOP) outlines the utilization of reference OMOP mappings, including a set of validated mappings produced through a specific Delphi process. In this process, flowsheet descriptions were identified and prioritized based on their relevance to observational health research in critical care environments. These reference mappings are employed to catalog terms not covered by the existing set, thereby identifying unmapped terms that require further attention.

# Purpose
This SOP outlines the process for centrally managing unmapped source terms within the CHoRUS B2AI project. It provides detailed steps for integrating existing mappings, identifying unmapped terms, and documenting them for further action. This SOP applies to all project team members involved in data mapping and curation.

# Procedures

## Step 1: Integrate Reference Mappings into Your OMOP Vocabulary Instance
1.	Verify OMOP CDM Deployment and Accessibility.
- Ensure that your OMOP CDM instance is correctly deployed and accessible, with particular attention to the OMOP Standardized Vocabularies schema.
- Confirm that all required standardized vocabularies have been downloaded from [OHDSI Athena](https://athena.ohdsi.org/vocabulary/list), installed, and are from the latest official OHDSI Vocabulary release. 
2. Import Mappings into the Vocabulary Tables
- Access the mappings (B2AI Ontology) available in the [`chorus-mapping-stage/ontology`](https://github.com/chorus-ai/chorus-mapping-stage/tree/main/Ontology) CSV files. If you do not have access, please request it from Jared Houghtaling (jared.houghtaling@tuftsmedicine.org).
- Load the mappings from chorus-mapping-stage into the corresponding tables within the OMOP CDM Vocabulary schema:
    -	concept_ancestor table using `concept_ancestor_delta.csv`
    -	concept_class table using `concept_class_delta.csv`
    -	concept table using `concept_delta.csv`
    -	concept_relationship table using `concept_relationship_delta.csv`
    -	concept_synonym table using `concept_synonym_delta.csv`
    -	source_to_concept_map table using `source_to_concept_map.csv`
    -	vocabulary table using `vocabulary_delta.csv`
    -	mapping_metadata table using `mapping_metadata.csv`

## Step 2: Prepare Concepts to Be Mapped
- Compile a set of source terms requiring mapping. Prioritize terms based on frequency and clinical relevance. Categorize terms based on their respective domain within the OMOP CDM. Common domains include Measurement, Observation, Meas Value, Condition, Procedure, Drug, and Device.

## Step 3: Develop Matching Algorithm
- Create a `JOIN` query to compare source descriptions with B2AI Ontology descriptions.
- Implement the following matching techniques:
  - Case normalization (lower/upper case conversion)
  - Prefix removal
  - Term splitting
  - Full name matching
  - Concept synonym names from the `concept_synonym` table
  - Removal of digits, spaces, and special characters
  - Fuzzy matching (e.g., Levenshtein distance, Jaro-Winkler distance)
  - Bag-of-words comparison
- Consider combining multiple matching techniques to optimize accuracy.

## Step 4: Perform Mapping and Validation
- Execute the `JOIN` query to identify potential mappings between source and target terms.
- Validate the generated mappings for accuracy and completeness.
- Create a delta table containing source descriptions that remain unmapped.

## Step 5: Document and Share Unmapped Terms
- Record the delta table of unmapped source terms, ensuring all relevant metadata is captured and organized for clarity and ease of reference, as shown below:

| **Field Name**        | **Description**                                                        | **Data Type** | **Example**           |
|-----------------------|------------------------------------------------------------------------|---------------|-----------------------|
| `source_table`        | The name of the table from which the source data is extracted.         | String        | `flowsheets`|
| `count`        | The number of times the source term appears in the source data, representing its frequency of occurrence.         | Numeric        | `2354`|
| `source_code`         | The unique code associated with the source term or concept.            | String        | `2000034545` |
| `source_description`  | A textual description or label corresponding to the source code.       | String        | `ETT Depth (Intubation)`|
| `max_source_value`    | The most frequently observed value for a specific source term across the dataset (relevant for the Observation and Measurement domains) | Numeric/String       | `21`|
| `max_source_unit`     | The unit of measurement associated with the most frequently observed value (relevant for the Measurement domain)  | String        | `CM`|
| `comments`        |  Captures notes on the mapping process, including reasons for unsuccessful mappings, challenges encountered, and/or the identity of the person who attempted the mapping.| String        | `Concept too granular, no equivalent in standardized vocabulary; Senior Data Analyst, John Doe`|

- For observations and measurements, extract units from either a separate column or embedded within the source description (e.g., in brackets). Map these units to standard units in the OMOP vocabulary. If a unit cannot be mapped, document it in the delta table with appropriate comments.
- Recognize that measurement values can be concepts (e.g., qualitative results like "Positive" or "Negative"). Attempt to map these values to standard concepts. Document any unmapped values in the delta table.
- Distribute the delta table to the Standards Team using a preferred method:
  - **Email:** Send directly to Marty Alvarez (Marta.Alvarez@tuftsmedicine.org).
  - **GitHub:** Upload the file containing unmapped terms to the `Unmapped-Terms` folder in the [chorus-mapping-stage](https://github.com/chorus-ai/chorus-mapping-stage) repository. Use a branch named `review-unmapped-[sitename]` for clarity and version control.

The naming convention for the file should be formatted as `UnmappedCategory_SiteName_MMDDYY`, where "UnmappedCategory" specifies the semantic category of unmapped terms (e.g. FlowsheetItems, FlowsheetValues), "SiteName" is the institution (in CamelCase), and "MMDDYY" represents the date in a two-digit format.

Please choose the method for sharing the delta table of unmapped source terms that adheres to your organization's data policy and addresses proprietary concerns. Ensure that the selected approach complies with your security protocols and data management standards before initiating the transfer.

## Additional Considerations
- Regularly review and update the mapping algorithm to improve matching accuracy.
- Establish clear guidelines for handling ambiguous or multiple matches.
