<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Waveform-Data/Waveform-Extension" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Waveform Extension | Chorus-SOP</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://chorus-ai.io/Chorus_SOP/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://chorus-ai.io/Chorus_SOP/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://chorus-ai.io/Chorus_SOP/docs/Waveform-Data/Waveform-Extension"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Waveform Extension | Chorus-SOP"><meta data-rh="true" name="description" content="An SOP for the waveform extension to the OMOP CDM"><meta data-rh="true" property="og:description" content="An SOP for the waveform extension to the OMOP CDM"><link data-rh="true" rel="icon" href="/Chorus_SOP/img/chorus-ai.png"><link data-rh="true" rel="canonical" href="https://chorus-ai.io/Chorus_SOP/docs/Waveform-Data/Waveform-Extension"><link data-rh="true" rel="alternate" href="https://chorus-ai.io/Chorus_SOP/docs/Waveform-Data/Waveform-Extension" hreflang="en"><link data-rh="true" rel="alternate" href="https://chorus-ai.io/Chorus_SOP/docs/Waveform-Data/Waveform-Extension" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Chorus_SOP/blog/rss.xml" title="Chorus-SOP RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Chorus_SOP/blog/atom.xml" title="Chorus-SOP Atom Feed"><link rel="stylesheet" href="/Chorus_SOP/assets/css/styles.b040b797.css">
<script src="/Chorus_SOP/assets/js/runtime~main.4a7bbad9.js" defer="defer"></script>
<script src="/Chorus_SOP/assets/js/main.b5194d20.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Chorus_SOP/"><div class="navbar__logo"><img src="/Chorus_SOP/img/chorus-ai.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Chorus_SOP/img/chorus-ai.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Chorus_SOP/docs/intro">SOPs</a><a class="navbar__item navbar__link" href="/Chorus_SOP/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div><a href="https://github.com/chorus-ai/Chorus_SOP" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Chorus_SOP/docs/intro">SOP Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/central-processing">Central Processing</a><button aria-label="Expand sidebar category &#x27;Central Processing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/common-data-elements">Common Data Elements</a><button aria-label="Expand sidebar category &#x27;Common Data Elements&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/data-quality">Data Quality</a><button aria-label="Expand sidebar category &#x27;Data Quality&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/data-requests">Data Requests</a><button aria-label="Expand sidebar category &#x27;Data Requests&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/data-uploading">Data Uploading</a><button aria-label="Expand sidebar category &#x27;Data Uploading&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/flowsheet-data">Flowsheet Data</a><button aria-label="Expand sidebar category &#x27;Flowsheet Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/freetext-data">Freetext Data</a><button aria-label="Expand sidebar category &#x27;Freetext Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/gis-exposure-data">GIS Exposure Data</a><button aria-label="Expand sidebar category &#x27;GIS Exposure Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/imaging-data">Imaging Data</a><button aria-label="Expand sidebar category &#x27;Imaging Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/multimodal-linkage">Multimodal Linkage</a><button aria-label="Expand sidebar category &#x27;Multimodal Linkage&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/omop-mapping">OMOP Mapping</a><button aria-label="Expand sidebar category &#x27;OMOP Mapping&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/privacy">Privacy</a><button aria-label="Expand sidebar category &#x27;Privacy&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/structured-ehr-data">Structured EHR Data</a><button aria-label="Expand sidebar category &#x27;Structured EHR Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/Chorus_SOP/docs/category/waveform-data">Waveform Data</a><button aria-label="Collapse sidebar category &#x27;Waveform Data&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Chorus_SOP/docs/Waveform-Data/">Contributing waveform data to CHoRUS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Chorus_SOP/docs/Waveform-Data/Waveform-Extension">Waveform Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Chorus_SOP/docs/Waveform-Data/Waveform-File-Format">Waveform File Format</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/templates">Templates</a><button aria-label="Expand sidebar category &#x27;Templates&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/deprecated-documentation">Deprecated Documentation</a><button aria-label="Expand sidebar category &#x27;Deprecated Documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Chorus_SOP/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Chorus_SOP/docs/category/waveform-data"><span itemprop="name">Waveform Data</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Waveform Extension</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Waveform Extension</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-purpose">1. Purpose<a href="#1-purpose" class="hash-link" aria-label="Direct link to 1. Purpose" title="Direct link to 1. Purpose">​</a></h2>
<p>This SOP provides detailed implementation guidance for the OMOP CDM Waveform Extension, encompassing specifications and updated procedures for the following tables: waveform_occurrence, waveform_registry, waveform_feature, and waveform_channel_metadata. It serves as an addendum to the previously published Multimodal Linkage SOP [<a href="https://chorus-ai.github.io/Chorus_SOP/docs/Multimodal-Linkage/" target="_blank" rel="noopener noreferrer">https://chorus-ai.github.io/Chorus_SOP/docs/Multimodal-Linkage/</a>],<!-- --> which first introduced the waveform_registry table. This addendum modifies and expands the scope of that guidance to reflect a broader, semantically integrated model for representing waveform acquisition events, derived features, and signal metadata. The updated schema enables consistent ingestion, standardization, and temporal alignment of physiological waveform data (e.g., ECG, EEG, ABP), supporting use cases in critical care, AI model development, and observational research within the OMOP CDM ecosystem.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-scope">2. Scope<a href="#2-scope" class="hash-link" aria-label="Direct link to 2. Scope" title="Direct link to 2. Scope">​</a></h2>
<p>Applicable to all ETL pipelines and data engineers responsible for transforming raw physiological waveform files into OMOP CDM via harmonized linkage tables.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-procedural-steps">3. Procedural Steps<a href="#3-procedural-steps" class="hash-link" aria-label="Direct link to 3. Procedural Steps" title="Direct link to 3. Procedural Steps">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3a-understand-the-table-population-order--rationale">3A. Understand The Table Population Order &amp; Rationale<a href="#3a-understand-the-table-population-order--rationale" class="hash-link" aria-label="Direct link to 3A. Understand The Table Population Order &amp; Rationale" title="Direct link to 3A. Understand The Table Population Order &amp; Rationale">​</a></h3>
<p>The waveform_occurrence table must be populated first, as it defines the core acquisition event and provides a semantic and temporal anchor for all other tables. Each waveform file (waveform_registry), feature (waveform_feature), and channel metadata (waveform_channel_metadata) must link back to this acquisition context.</p>
<table><thead><tr><th style="text-align:center">Step</th><th style="text-align:center">Table</th><th style="text-align:center">Rationale</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">waveform_occurrence</td><td style="text-align:center">Establishes clinical and temporal context for the recording session</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">waveform_registry</td><td style="text-align:center">Registers each raw waveform file, linked to the occurrence</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">waveform_channel_metadata</td><td style="text-align:center">Describes per-signal-channel metadata for each registered file</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">waveform_feature</td><td style="text-align:center">Stores derived features from specific waveform-channel combinations</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4--populate-waveform-occurrence">4.  Populate Waveform Occurrence<a href="#4--populate-waveform-occurrence" class="hash-link" aria-label="Direct link to 4.  Populate Waveform Occurrence" title="Direct link to 4.  Populate Waveform Occurrence">​</a></h2>
<p>Scan source directories (or data lakes) for waveform files to be processed, based on project-specific triggers (e.g., hourly ingestion, daily batch, or one-time archival loads). Files may include both newly acquired and previously unprocessed recordings.
Maintain an audit trail or metadata log to track:</p>
<ul>
<li>File name and hash</li>
<li>Ingestion timestamp</li>
<li>ETL status (e.g., “pending”, “linked”, “failed”)</li>
<li>Any warnings (e.g., missing timestamps, unmapped formats)</li>
</ul>
<p>Ensure idempotency by checking for existing waveform_target_file_path or file hashes in the waveform_registry table (if already exists) before processing.
For each newly detected file:</p>
<ul>
<li>Extract the following attributes, either from file headers (e.g., EDF, WFDB metadata) or companion metadata files:</li>
<li>source path and file name</li>
<li>file extension (e.g., .edf, .csv)</li>
<li>recording start and end timestamps</li>
<li>session ID, accession number, or acquisition identifier (if available)</li>
</ul>
<p>Store this metadata in a temporary staging table or in-memory object for the matching logic.</p>
<table><thead><tr><th style="text-align:center">Order</th><th style="text-align:center">Field</th><th style="text-align:center">Data Type</th><th style="text-align:center">Required</th><th style="text-align:center">How to Populate</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">waveform_occurrence_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Generate a unique surrogate key. Use a database sequence or ETL UUID system to guarantee uniqueness across all acquisition events.</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">waveform_occurrence_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Determine the clinical or operational purpose of the acquisition (e.g., “ICU telemetry”, “12-lead diagnostic ECG”). Map to a standard OMOP concept. If no match exists, use a 2-billion custom concept ID and log it for vocabulary review.</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">person_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Link to the PERSON table using EHR metadata (e.g., from admission record, monitoring system export, or device mapping). Validate that the person exists and is not a test/dummy ID.</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">waveform_occurrence_start_datetime</td><td style="text-align:center">datetime</td><td style="text-align:center">Yes</td><td style="text-align:center">Extract the earliest start timestamp from the associated waveform files (via headers or metadata). In asynchronous settings (e.g., streaming), this may precede individual file start times.</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">waveform_occurrence_end_datetime</td><td style="text-align:center">datetime</td><td style="text-align:center">Yes</td><td style="text-align:center">Extract the latest end timestamp among all associated files. Can exceed the last file if acquisition continued but files were truncated or rolled. Ensure end ≥ start.</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">visit_occurrence_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Derive from linked clinical encounter in the EHR. Join on person_id, acquisition time, or session_id. Use closest visit in time if exact match is unavailable. Required for OMOP compliance.</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">visit_detail_id</td><td style="text-align:center">int</td><td style="text-align:center">Optional</td><td style="text-align:center">Populate if more granular context is available (e.g., ward, unit, device location). Useful in ICU or telemetry use cases. Leave null if not available.</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">preceding_waveform_occurrence_id</td><td style="text-align:center">int</td><td style="text-align:center">Optional</td><td style="text-align:center">Populate with the waveform_occurrence_id of the immediately preceding waveform acquisition event for the same person, when a clear temporal sequence or session linkage is known. This field supports ordered association of sequential waveform recordings - useful for analyzing repeated measurements, segment continuity, or longitudinal monitoring (e.g., ICU telemetry every 30 minutes). Leave null if this is the first known acquisition for the person or if sequencing cannot be reliably determined.</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">waveform_format_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Optional</td><td style="text-align:center">Use if the entire acquisition session has a common format (e.g., WFDB, EDF). Map to OMOP concept if it exists; otherwise, generate a custom 2-billion concept ID. Skip if formats vary per file.</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">waveform_occurrence_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Recommended</td><td style="text-align:center">Use the raw session ID, accession number, or study instance UID from the monitoring system or file metadata. Helps with traceability and QA.</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">num_of_files</td><td style="text-align:center">int</td><td style="text-align:center">Recommended (Deferred)</td><td style="text-align:center">Compute after ingesting linked waveform_registry entries. Count all files with the same waveform_occurrence_id. Helps in QA and completeness tracking.</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">waveform_format_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Optional</td><td style="text-align:center">Store raw label for format as extracted from header or source system (e.g., “.dat/.hea”, “HL7 aECG”). Helps with retrospective mapping and vocabulary improvement.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4a-common-issues--solutions">4A. Common issues &amp; solutions:<a href="#4a-common-issues--solutions" class="hash-link" aria-label="Direct link to 4A. Common issues &amp; solutions:" title="Direct link to 4A. Common issues &amp; solutions:">​</a></h3>
<ul>
<li>Missing timestamps → Estimate using file headers; flag for manual verification.</li>
<li>Multiple visits matched → Use most specific visit_detail_id or define business rule.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4b-mapping-logic-examples-and-extension-support">4B. Mapping Logic Examples and Extension Support<a href="#4b-mapping-logic-examples-and-extension-support" class="hash-link" aria-label="Direct link to 4B. Mapping Logic Examples and Extension Support" title="Direct link to 4B. Mapping Logic Examples and Extension Support">​</a></h3>
<ul>
<li>Source data has multiple files per waveform occurrence -&gt; supported</li>
<li>Source data has one file per waveform occurrence -&gt; supported</li>
<li>Source data has multiple waveform occurrences per file:<!-- -->
<ul>
<li>The same acquisition type (i.e., waveform_occurrence_concept_id) collected for disconnected periods in the patient’s trajectory -&gt; supported; the waveform_registry entry will point to the earliest waveform_occurrence; backtracking of later waveform_occurrences will use preceeding_waveform_occurrence_id. For CHoRUS, these files will be split by the WFDB converter resulting in possibility 1.</li>
<li>Different acquisition types collected during overlapping periods and stored in the same file -&gt; unsupported; files must be split by acquisition type. For CHoRUS, this will be performed by the WFDB converter.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-populate-waveform_registry">5. Populate waveform_registry<a href="#5-populate-waveform_registry" class="hash-link" aria-label="Direct link to 5. Populate waveform_registry" title="Direct link to 5. Populate waveform_registry">​</a></h2>
<p>This table records file-level metadata and linkages.
Now that each file can be linked to a waveform_occurrence, proceed to register each file:</p>
<table><thead><tr><th style="text-align:center">Order</th><th style="text-align:center">Field</th><th style="text-align:center">Data Type</th><th style="text-align:center">Required</th><th style="text-align:center">How to Populate</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">waveform_registry_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Generate a unique surrogate key for each waveform file. Use an auto-incremented sequence or UUID logic. Must be persistent across ETL reruns.</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">waveform_occurrence_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Foreign key to the waveform_occurrence table. Must be resolved before file ingestion by matching session ID or aligning timestamps. Raise an exception if missing.</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">waveform_feature_id</td><td style="text-align:center">int</td><td style="text-align:center">No</td><td style="text-align:center">Populate only if the file in this row is itself a feature representation (e.g., a derived high-density time series, spectrogram, or vectorized representation). This value must point to an existing waveform_feature.waveform_feature_id. Use this when a file represents the output of a feature pipeline, not a raw signal. Leave null for traditional raw waveform files. Ensures unambiguous linkage when calculating additional features on derived signal representations.</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">person_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Inherit directly from the linked waveform_occurrence. Do not independently derive from file metadata. This ensures consistency across all tables.</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">waveform_file_start_datetime</td><td style="text-align:center">datetime</td><td style="text-align:center">Yes</td><td style="text-align:center">Extract from the file header (e.g., EDF+, WFDB .hea, HDF5 metadata). If unavailable, fallback to waveform_occurrence_start_datetime but log as approximate.</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">waveform_file_end_datetime</td><td style="text-align:center">datetime</td><td style="text-align:center">Yes</td><td style="text-align:center">Same as above. If duration is not explicit, estimate using sample count × sampling rate. Always ensure end ≥ start. If file is a single snapshot, start = end.</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">visit_occurrence_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Inherit directly from waveform_occurrence. Ensure that it matches the patient’s visit where waveform acquisition occurred. Required for OMOP compliance.</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">visit_detail_id</td><td style="text-align:center">int</td><td style="text-align:center">Optional</td><td style="text-align:center">Inherit from waveform_occurrence if available. Populate for ICU or unit-level granularity. Leave null if not tracked in the system.</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">file_extension_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Recommended</td><td style="text-align:center">Map the file extension (e.g., .edf, .csv, .hea) to a standard OMOP concept ID. If not found, assign a temporary 2-billion concept ID and record for future vocabulary harmonization. Maintain a controlled mapping table.</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">file_extension_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Yes</td><td style="text-align:center">Store the raw file extension exactly as extracted from the filename. Examples: .edf, .hea, .mat. Case-sensitive preservation is preferred.</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">waveform_source_file_uri</td><td style="text-align:center">string</td><td style="text-align:center">Optional</td><td style="text-align:center">Store the original file path or URI from the source system. Useful for traceability, re-extraction, or audit. If not captured, leave null. Encrypt if paths contain PHI.</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">waveform_target_file_uri</td><td style="text-align:center">string</td><td style="text-align:center">Yes</td><td style="text-align:center">Store the final standardized path, object storage URI, or relative location of the file in the transformed dataset. This value is required for downstream access (e.g., visualization, AI pipelines). Naming conventions should include waveform_registry_id or session UID.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5a-edge-cases">5A. Edge cases:<a href="#5a-edge-cases" class="hash-link" aria-label="Direct link to 5A. Edge cases:" title="Direct link to 5A. Edge cases:">​</a></h3>
<ul>
<li>Missing file timestamps → Fall back to occurrence; log reduced precision.</li>
<li>Files not uniquely named → Use hash, device ID, or accession to disambiguate.</li>
<li>Unmapped file extensions → Temporarily assign custom concept ID (2B range); notify vocabulary steward.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-populate-waveform_channel_metadata">6. Populate waveform_channel_metadata<a href="#6-populate-waveform_channel_metadata" class="hash-link" aria-label="Direct link to 6. Populate waveform_channel_metadata" title="Direct link to 6. Populate waveform_channel_metadata">​</a></h2>
<p>Iterate over each file&#x27;s signal channels and extract per-channel metadata:</p>
<table><thead><tr><th style="text-align:center">Order</th><th style="text-align:center">Field</th><th style="text-align:center">Data Type</th><th style="text-align:center">Required</th><th style="text-align:center">How to Populate</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">waveform_channel_metadata_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Generate a unique surrogate key (integer). Use database sequence or ETL logic to ensure uniqueness across all channel metadata entries.</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">waveform_registry_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Foreign key from the associated waveform file (waveform_registry). Must already exist. Join via filename or internal file ID parsed from source.</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">procedure_occurrence_id</td><td style="text-align:center">int</td><td style="text-align:center">Conditionally Required</td><td style="text-align:center">Populate if the waveform is tied to a documented clinical procedure (e.g., diagnostic ECG, EEG study). Extract from EHR or metadata tags; if not available, leave null.</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">device_exposure_id</td><td style="text-align:center">int</td><td style="text-align:center">Optional</td><td style="text-align:center">Link to device record if available (e.g., from ICU device logs or telemetry registry). If a device used is known (Philips monitor, EEG cap), map via ETL joins; else leave null.</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">waveform_channel_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Recommended</td><td style="text-align:center">Use channel label from the raw waveform file (e.g., “Lead II”, “ECG I”, “SpO2”, “ABP”). If not present, derive from channel index or use placeholder (“Channel 1”).</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">channel_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Map the channel label or signal type to a standard OMOP concept (2-billion range or community extension). Use a lookup table for common physiological signals. Log unmapped entries for review.</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">metadata_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Yes</td><td style="text-align:center">Populate with the metadata type, such as “sampling_rate”, “gain”, “calibration_factor”, “compression_ratio”. Extracted from header fields or external metadata.</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">metadata_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Map the metadata_source_value to a standard OMOP concept (e.g., &quot;Sampling rate&quot; → CONCEPT_ID = X). Maintain an internal vocabulary map; flag unknowns.</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">value_as_number</td><td style="text-align:center">float</td><td style="text-align:center">Optional</td><td style="text-align:center">Use if the metadata is numeric (e.g., sampling_rate = 500, gain = 0.2). Validate precision and units. Use float type.</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">value_as_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Optional</td><td style="text-align:center">Use if the value is categorical and can be mapped to an OMOP concept (e.g., &quot;Invasive&quot; → concept ID, &quot;High Quality&quot; → concept ID). Optional if stored in value_as_string.</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">value_as_string</td><td style="text-align:center">string</td><td style="text-align:center">Optional</td><td style="text-align:center">Use for non-numeric, human-readable metadata (e.g., &quot;DC coupling&quot;, &quot;auto-scaled&quot;, &quot;2x compression&quot;). Store the raw metadata value as a string if it does not fit numeric or concept fields.</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">unit_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Recommended</td><td style="text-align:center">Populate for physical values (e.g., Hz, mmHg, mV) using OMOP standard units. Use unit lookup table or join against raw units found in header.</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">unit_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Recommended</td><td style="text-align:center">Raw unit string as it appeared in the source (e.g., “Hz”, “mmHg”, “uV”). Helps track unusual or non-standard units and improves auditability.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6a-conflicts">6A. Conflicts:<a href="#6a-conflicts" class="hash-link" aria-label="Direct link to 6A. Conflicts:" title="Direct link to 6A. Conflicts:">​</a></h3>
<ul>
<li>Multiple labels per channel → Standardize via channel index.</li>
<li>Conflicting sampling rates → Default to most frequent or highest resolution.</li>
<li>Variable sampling rates → Use &quot;non-uniform&quot; option for irregular time intervals.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-populate-waveform_feature">7. Populate waveform_feature<a href="#7-populate-waveform_feature" class="hash-link" aria-label="Direct link to 7. Populate waveform_feature" title="Direct link to 7. Populate waveform_feature">​</a></h2>
<p>Once the files are registered and metadata is in place, apply ML pipelines or signal-processing algorithms to derive waveform features (e.g., QT interval, entropy, apnea detection). For each extracted feature, populate:</p>
<table><thead><tr><th style="text-align:center">Order</th><th style="text-align:center">Field</th><th style="text-align:center">Data Type</th><th style="text-align:center">Required</th><th style="text-align:center">How to Populate</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">waveform_feature_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Generate a unique surrogate key (e.g., via sequence or UUID). Each derived feature must have its own ID.</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">waveform_occurrence_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Foreign key to waveform_occurrence. Must be assigned from the session that provided the raw waveform data. Extracted from upstream linkage or stored in intermediate metadata pipeline.</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">waveform_registry_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Foreign key to waveform_registry. Identifies the specific file from which the feature was extracted. Ensure file was processed and exists in the registry.</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">waveform_channel_metadata_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Foreign key to waveform_channel_metadata. Indicates the exact channel used to compute the feature (e.g., ECG Lead II). Use the signal name and channel index to link.</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">measurement_id / observation_id</td><td style="text-align:center">int</td><td style="text-align:center">Conditionally Required</td><td style="text-align:center">If the derived feature matches an existing OMOP MEASUREMENT (e.g., heart rate) or OBSERVATION (e.g., “apnea event”), populate the appropriate foreign key. Use LOINC/OMOP vocabularies. Leave null if no standard concept applies.</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">algorithm_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Yes</td><td style="text-align:center">Map the derivation method to a standard OMOP concept (e.g., “Bazett’s formula”, “HRV SDNN method”). If no concept exists, use a 2-billion custom ID and record for future standardization.</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">algorithm_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Recommended</td><td style="text-align:center">Record the descriptive name of the algorithm, method, or software package used (e.g., “Kubios HRV 3.4”, “Neurokit entropy”). Helps with reproducibility and audit. Null - if unknown.</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">anatomic_site_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Optional</td><td style="text-align:center">If the waveform was collected from a known anatomical site (e.g., “left wrist”, “chest”), map to a standard OMOP concept. Helps disambiguate multichannel/multimodal recordings.</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">waveform_feature_start_timestamp</td><td style="text-align:center">time</td><td style="text-align:center">Recommended</td><td style="text-align:center">Start time of the temporal window over which the feature was derived (e.g., 10:12:00 AM if computed from minute 12). Must fall within file timestamps.</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">waveform_feature_end_timestamp</td><td style="text-align:center">time</td><td style="text-align:center">Recommended</td><td style="text-align:center">End time of the window. Required for interval-based features like HRV, respiratory rate, or entropy. Equal to start time for instantaneous features.</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">is_feature_overflow</td><td style="text-align:center">boolean</td><td style="text-align:center">Optional</td><td style="text-align:center">Populate as TRUE if the feature was derived from signal segments that span multiple waveform files, waveform occurrences, or signal channels. This field helps downstream consumers account for composite or stitched features that cannot be strictly attributed to a single source. Leave NULL if undetermined.</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">value_as_number</td><td style="text-align:center">float</td><td style="text-align:center">Recommended</td><td style="text-align:center">Populate if the feature is quantitative (e.g., HR = 75 bpm, Entropy = 0.85). Must be a valid float.</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">value_as_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Recommended</td><td style="text-align:center">Use if the feature is categorical (e.g., “Low signal quality”, “Apnea present”). Map to OMOP concept or use custom 2B ID.</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center">value_as_string</td><td style="text-align:center">string</td><td style="text-align:center">Optional</td><td style="text-align:center">Use if the feature cannot be mapped or is stored in descriptive form (e.g., “artifact detected”, “tachycardia”). Supports flexibility in early-stage pipelines.</td></tr><tr><td style="text-align:center">15</td><td style="text-align:center">value_is_a_registry_file</td><td style="text-align:center">boolean</td><td style="text-align:center">No</td><td style="text-align:center">Set to TRUE (1) if the feature value is stored as a file in WAVEFORM_REGISTRY, rather than a discrete number or concept (e.g., time-frequency embedding, long-form entropy sequence). When true, link to the file using waveform_feature_id. Should typically be FALSE for most scalar feature values; only set to TRUE when the feature itself is represented as a file. Helps differentiate scalar vs. file-based features.</td></tr><tr><td style="text-align:center">15</td><td style="text-align:center">unit_concept_id</td><td style="text-align:center">int</td><td style="text-align:center">Recommended if numeric</td><td style="text-align:center">Required if value_as_number is populated. Map the physical unit to an OMOP concept (e.g., “ms”, “Hz”, “bpm”).</td></tr><tr><td style="text-align:center">16</td><td style="text-align:center">unit_source_value</td><td style="text-align:center">string</td><td style="text-align:center">Recommended if numeric</td><td style="text-align:center">Record the unit label exactly as it appeared in the source (e.g., “bpm”, “s”, “mV”). Use for audit and future vocabulary improvement.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7a-pitfalls">7A. Pitfalls:<a href="#7a-pitfalls" class="hash-link" aria-label="Direct link to 7A. Pitfalls:" title="Direct link to 7A. Pitfalls:">​</a></h3>
<ul>
<li>No clear mapping to MEASUREMENT → Use observation_id or record independently.</li>
<li>Low-confidence results → Use waveform_feature_modifier or external flag table.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-validate--control-quality">8. Validate &amp; Control Quality<a href="#8-validate--control-quality" class="hash-link" aria-label="Direct link to 8. Validate &amp; Control Quality" title="Direct link to 8. Validate &amp; Control Quality">​</a></h2>
<table><thead><tr><th style="text-align:center">Check</th><th style="text-align:center">Action</th></tr></thead><tbody><tr><td style="text-align:center">Timestamps inconsistent across tables</td><td style="text-align:center">Reject row, escalate to data QC</td></tr><tr><td style="text-align:center">Unmapped concepts</td><td style="text-align:center">Log and assign temporary ID; notify the Standards team</td></tr><tr><td style="text-align:center">Missing foreign keys</td><td style="text-align:center">Log and block downstream linkage</td></tr><tr><td style="text-align:center">Duplicate files or channels</td><td style="text-align:center">Hash-based duplication check</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8a-maintain-logs-for">8A. Maintain logs for:<a href="#8a-maintain-logs-for" class="hash-link" aria-label="Direct link to 8A. Maintain logs for:" title="Direct link to 8A. Maintain logs for:">​</a></h3>
<ul>
<li>Missing or low-confidence mappings</li>
<li>Outlier timestamps</li>
<li>ETL batch stats: counts, failure reasons, nulls</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9--post-etl-auditing">9.  Post-ETL Auditing<a href="#9--post-etl-auditing" class="hash-link" aria-label="Direct link to 9.  Post-ETL Auditing" title="Direct link to 9.  Post-ETL Auditing">​</a></h2>
<ul>
<li>Run counts across waveform_occurrence, waveform_registry, waveform_channel_metadata, waveform_feature</li>
<li>Validate 1<!-- -->:N<!-- --> relationships (e.g., one occurrence → N files)</li>
<li>Validate time consistency between registry and occurrence</li>
<li>Optional: Implement hash-based verification of file integrity</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-exception-handling">10. Exception Handling<a href="#10-exception-handling" class="hash-link" aria-label="Direct link to 10. Exception Handling" title="Direct link to 10. Exception Handling">​</a></h2>
<ul>
<li>Missing occurrence: Halt file ingestion; generate ticket.</li>
<li>Future datetimes: Flag as temporal error; require manual correction.</li>
<li>Extension concept missing: Default to a custom &#x27;unmapped extension&#x27;; schedule vocab update.</li>
<li>File path missing: Halt ingestion; escalate to data engineering.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-operational-considerations">11. Operational Considerations<a href="#11-operational-considerations" class="hash-link" aria-label="Direct link to 11. Operational Considerations" title="Direct link to 11. Operational Considerations">​</a></h2>
<ul>
<li>The registry table may be updated multiple times in a day; use batch loaders.</li>
<li>Maintain consistent waveform_registry_id across ETL runs for idempotency.</li>
<li>QC metrics: number of files ingested, timestamps outside expected windows, missing links per run.</li>
<li>Perform daily reconciliation between source files and registry entries.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-audit-trail--lineage">12. Audit Trail &amp; Lineage<a href="#12-audit-trail--lineage" class="hash-link" aria-label="Direct link to 12. Audit Trail &amp; Lineage" title="Direct link to 12. Audit Trail &amp; Lineage">​</a></h2>
<p>Every row insertion/update in waveform_registry must include record_insert_datetime, record_source_system, and etl_run_id, ensuring reproducibility and provenance.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-dependencies">13. Dependencies<a href="#13-dependencies" class="hash-link" aria-label="Direct link to 13. Dependencies" title="Direct link to 13. Dependencies">​</a></h2>
<p>Relies on:</p>
<ul>
<li>Properly populated waveform_occurrence, PERSON, VISIT_OCCURRENCE, and vocabulary tables.</li>
<li>Access to controlled ETL staging directories.</li>
<li>External mapping file from extensions to OMOP extension concept IDs.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="14-update-management">14. Update Management<a href="#14-update-management" class="hash-link" aria-label="Direct link to 14. Update Management" title="Direct link to 14. Update Management">​</a></h2>
<ul>
<li>Changes to extension mappings must be versioned via an internal registry and reviewed.</li>
<li>Major schema changes trigger calendar updates to this SOP.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="15-compliance--tools">15. Compliance &amp; Tools<a href="#15-compliance--tools" class="hash-link" aria-label="Direct link to 15. Compliance &amp; Tools" title="Direct link to 15. Compliance &amp; Tools">​</a></h2>
<ul>
<li>Use standard SQL-based insertion/upsert logic.</li>
<li>Implement CI tests for field-level constraints.</li>
<li>Leverage ETL orchestration tools (e.g., Airflow) to schedule ingestion, validation, and logging.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="16-contact-information">16. Contact Information<a href="#16-contact-information" class="hash-link" aria-label="Direct link to 16. Contact Information" title="Direct link to 16. Contact Information">​</a></h2>
<ul>
<li>Email: Jared Houghtaling <code>&lt;jared.houghtaling@tuftsmedicine.org&gt;</code></li>
<li>Email: Polina Talapova  <code>&lt;ptalapova@tuftsmedicine.org&gt;</code></li>
<li>Email: Brian Gow <code>&lt;briangow@mit.edu&gt;</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-office-hours">Related Office Hours<a href="#related-office-hours" class="hash-link" aria-label="Direct link to Related Office Hours" title="Direct link to Related Office Hours">​</a></h2>
<p>The following office hour sessions provide additional context and demonstrations related to this SOP:</p>
<ul>
<li>
<p><strong>[03-13-25] Linking waveform and EHR data - Part 1</strong></p>
<ul>
<li><a href="https://drive.google.com/file/d/1u11084E3psVNx1KsFj0m7cpis-l_WAwd/view?usp=share_link" target="_blank" rel="noopener noreferrer">Video Recording</a> | <a href="https://docs.google.com/document/d/1noFYSDrtOZYg-fiHE2bHgMpxTBHWXVL9/edit?usp=share_link&amp;ouid=104468275537210259794&amp;rtpof=true&amp;sd=true" target="_blank" rel="noopener noreferrer">Transcript</a></li>
<li>Introduction to waveform and EHR data linkage methodology</li>
</ul>
</li>
<li>
<p><strong>[03-20-25] Linking waveform and EHR data - Part 2</strong></p>
<ul>
<li><a href="https://drive.google.com/file/d/1mbPZ35yuJrOSWiLYEuz7YrEieXodmd00/view?usp=share_link" target="_blank" rel="noopener noreferrer">Video Recording</a> | <a href="https://docs.google.com/document/d/1-Dfaxd_D18b1U6VstUEffJvhH89mE-Lb/edit?usp=share_link&amp;ouid=104468275537210259794&amp;rtpof=true&amp;sd=true" target="_blank" rel="noopener noreferrer">Transcript</a></li>
<li>Continued discussion on waveform-EHR data integration</li>
</ul>
</li>
<li>
<p><strong>[04-17-25] Waveform linkage and site updates</strong></p>
<ul>
<li><a href="https://drive.google.com/file/d/1K2uF-pPrnutbxjh7LRm6pE4dkIK3rZtY/view?usp=share_link" target="_blank" rel="noopener noreferrer">Video Recording</a> | <a href="https://docs.google.com/document/d/1tsCTXEsxDw4TGkieQu7CZmjXlgxAzvJk/edit?usp=share_link&amp;ouid=104468275537210259794&amp;rtpof=true&amp;sd=true" target="_blank" rel="noopener noreferrer">Transcript</a></li>
<li>Updates on waveform linkage implementation across sites</li>
</ul>
</li>
<li>
<p><strong>[06-26-25] Implementation of OMOP CDM Waveform Extension SOP</strong></p>
<ul>
<li><a href="https://drive.google.com/file/d/15faSgQDdpkZP6Wz-J1dKoEqul6XUKcgR/view?usp=share_link" target="_blank" rel="noopener noreferrer">Video Recording</a> | <a href="https://docs.google.com/document/d/1fX5VCTc7z9lZZJNuMo60OJcuwGb7aEPM/edit?usp=share_link&amp;ouid=104468275537210259794&amp;rtpof=true&amp;sd=true" target="_blank" rel="noopener noreferrer">Transcript</a></li>
<li>Comprehensive session on implementing the 4-table waveform extension</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="17-references">17. References<a href="#17-references" class="hash-link" aria-label="Direct link to 17. References" title="Direct link to 17. References">​</a></h2>
<ul>
<li><a href="https://docs.google.com/document/d/1q-DV5EU4xahj_KkMVETkkosddzfkI8Sxbq4gd-AC0qY/edit?tab=t.0" target="_blank" rel="noopener noreferrer">Waveform Extension Proposal</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/chorus-ai/Chorus_SOP/edit/review/sop-website/docs/Waveform-Data/Waveform-Extension.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-28T19:21:11.000Z">Oct 28, 2025</time></b> by <b>Jared Houghtaling</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Chorus_SOP/docs/Waveform-Data/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Contributing waveform data to CHoRUS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Chorus_SOP/docs/Waveform-Data/Waveform-File-Format"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Waveform File Format</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-purpose" class="table-of-contents__link toc-highlight">1. Purpose</a></li><li><a href="#2-scope" class="table-of-contents__link toc-highlight">2. Scope</a></li><li><a href="#3-procedural-steps" class="table-of-contents__link toc-highlight">3. Procedural Steps</a><ul><li><a href="#3a-understand-the-table-population-order--rationale" class="table-of-contents__link toc-highlight">3A. Understand The Table Population Order &amp; Rationale</a></li></ul></li><li><a href="#4--populate-waveform-occurrence" class="table-of-contents__link toc-highlight">4.  Populate Waveform Occurrence</a><ul><li><a href="#4a-common-issues--solutions" class="table-of-contents__link toc-highlight">4A. Common issues &amp; solutions:</a></li><li><a href="#4b-mapping-logic-examples-and-extension-support" class="table-of-contents__link toc-highlight">4B. Mapping Logic Examples and Extension Support</a></li></ul></li><li><a href="#5-populate-waveform_registry" class="table-of-contents__link toc-highlight">5. Populate waveform_registry</a><ul><li><a href="#5a-edge-cases" class="table-of-contents__link toc-highlight">5A. Edge cases:</a></li></ul></li><li><a href="#6-populate-waveform_channel_metadata" class="table-of-contents__link toc-highlight">6. Populate waveform_channel_metadata</a><ul><li><a href="#6a-conflicts" class="table-of-contents__link toc-highlight">6A. Conflicts:</a></li></ul></li><li><a href="#7-populate-waveform_feature" class="table-of-contents__link toc-highlight">7. Populate waveform_feature</a><ul><li><a href="#7a-pitfalls" class="table-of-contents__link toc-highlight">7A. Pitfalls:</a></li></ul></li><li><a href="#8-validate--control-quality" class="table-of-contents__link toc-highlight">8. Validate &amp; Control Quality</a><ul><li><a href="#8a-maintain-logs-for" class="table-of-contents__link toc-highlight">8A. Maintain logs for:</a></li></ul></li><li><a href="#9--post-etl-auditing" class="table-of-contents__link toc-highlight">9.  Post-ETL Auditing</a></li><li><a href="#10-exception-handling" class="table-of-contents__link toc-highlight">10. Exception Handling</a></li><li><a href="#11-operational-considerations" class="table-of-contents__link toc-highlight">11. Operational Considerations</a></li><li><a href="#12-audit-trail--lineage" class="table-of-contents__link toc-highlight">12. Audit Trail &amp; Lineage</a></li><li><a href="#13-dependencies" class="table-of-contents__link toc-highlight">13. Dependencies</a></li><li><a href="#14-update-management" class="table-of-contents__link toc-highlight">14. Update Management</a></li><li><a href="#15-compliance--tools" class="table-of-contents__link toc-highlight">15. Compliance &amp; Tools</a></li><li><a href="#16-contact-information" class="table-of-contents__link toc-highlight">16. Contact Information</a></li><li><a href="#related-office-hours" class="table-of-contents__link toc-highlight">Related Office Hours</a></li><li><a href="#17-references" class="table-of-contents__link toc-highlight">17. References</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Chorus_SOP/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chorus4ai.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homesite<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/CHoRUS4AI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Chorus_SOP/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Chorus-AI, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>