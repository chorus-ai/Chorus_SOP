<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Multimodal-Linkage/Multimodal Data Linkage" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Multimodal Data Linkage | Chorus-SOP</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://chorus-ai.io/Chorus_SOP/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://chorus-ai.io/Chorus_SOP/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://chorus-ai.io/Chorus_SOP/docs/Multimodal-Linkage/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Multimodal Data Linkage | Chorus-SOP"><meta data-rh="true" name="description" content="An SOP for general conventions related to linking data between modalities"><meta data-rh="true" property="og:description" content="An SOP for general conventions related to linking data between modalities"><link data-rh="true" rel="icon" href="/Chorus_SOP/img/chorus-ai.png"><link data-rh="true" rel="canonical" href="https://chorus-ai.io/Chorus_SOP/docs/Multimodal-Linkage/"><link data-rh="true" rel="alternate" href="https://chorus-ai.io/Chorus_SOP/docs/Multimodal-Linkage/" hreflang="en"><link data-rh="true" rel="alternate" href="https://chorus-ai.io/Chorus_SOP/docs/Multimodal-Linkage/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Chorus_SOP/blog/rss.xml" title="Chorus-SOP RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Chorus_SOP/blog/atom.xml" title="Chorus-SOP Atom Feed"><link rel="stylesheet" href="/Chorus_SOP/assets/css/styles.b040b797.css">
<script src="/Chorus_SOP/assets/js/runtime~main.4a7bbad9.js" defer="defer"></script>
<script src="/Chorus_SOP/assets/js/main.b5194d20.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Chorus_SOP/"><div class="navbar__logo"><img src="/Chorus_SOP/img/chorus-ai.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Chorus_SOP/img/chorus-ai.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Chorus_SOP/docs/intro">SOPs</a><a class="navbar__item navbar__link" href="/Chorus_SOP/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div><a href="https://github.com/chorus-ai/Chorus_SOP" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Chorus_SOP/docs/intro">SOP Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/central-processing">Central Processing</a><button aria-label="Expand sidebar category &#x27;Central Processing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/common-data-elements">Common Data Elements</a><button aria-label="Expand sidebar category &#x27;Common Data Elements&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/data-quality">Data Quality</a><button aria-label="Expand sidebar category &#x27;Data Quality&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/data-requests">Data Requests</a><button aria-label="Expand sidebar category &#x27;Data Requests&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/data-uploading">Data Uploading</a><button aria-label="Expand sidebar category &#x27;Data Uploading&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/flowsheet-data">Flowsheet Data</a><button aria-label="Expand sidebar category &#x27;Flowsheet Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/freetext-data">Freetext Data</a><button aria-label="Expand sidebar category &#x27;Freetext Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/gis-exposure-data">GIS Exposure Data</a><button aria-label="Expand sidebar category &#x27;GIS Exposure Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/imaging-data">Imaging Data</a><button aria-label="Expand sidebar category &#x27;Imaging Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/Chorus_SOP/docs/category/multimodal-linkage">Multimodal Linkage</a><button aria-label="Collapse sidebar category &#x27;Multimodal Linkage&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Chorus_SOP/docs/Multimodal-Linkage/">Multimodal Data Linkage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/omop-mapping">OMOP Mapping</a><button aria-label="Expand sidebar category &#x27;OMOP Mapping&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/privacy">Privacy</a><button aria-label="Expand sidebar category &#x27;Privacy&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/structured-ehr-data">Structured EHR Data</a><button aria-label="Expand sidebar category &#x27;Structured EHR Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/waveform-data">Waveform Data</a><button aria-label="Expand sidebar category &#x27;Waveform Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/templates">Templates</a><button aria-label="Expand sidebar category &#x27;Templates&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Chorus_SOP/docs/category/deprecated-documentation">Deprecated Documentation</a><button aria-label="Expand sidebar category &#x27;Deprecated Documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Chorus_SOP/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Chorus_SOP/docs/category/multimodal-linkage"><span itemprop="name">Multimodal Linkage</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Multimodal Data Linkage</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Approved</h1>
<h1>[PROVISIONAL] Standard Operating Protocol for Linking Multiple Modes of Data</h1>
<h1>Purpose</h1>
<p>Each image and waveform file in a CHoRUS data extract should be linked to a record in the EHR data for an associated patient and encounter using OMOP-specific identifiers.</p>
<p>This SOP outlines a step-by-step approach for linking various modes of data together to ensure relational consistency and enable powerful cohort selection and analytical processes downstream.</p>
<p>The sections below describe work that has already been done on the MIMIC synthetic dataset, and describe CHoRUS conventions for linkage as well as their underlying motivations.</p>
<h1>Scope</h1>
<p>This SOP is narrowly focused on linking imaging and waveform data acquired on the same patient to ensure data integrity.</p>
<p><strong>What this SOP does not do:</strong></p>
<ul>
<li>Manage bundles of related waveform or imaging files acquired in a single procedure.</li>
<li>Include procedures for data deidentification, such as data shifting.</li>
<li>Cover the submission of data to the cloud.</li>
<li>Address data linking activities that occur in the cloud environment after sites have submitted the data.</li>
</ul>
<h1>Audience</h1>
<p>This SOP is intended for data acquisition site engineers that are assembling the required multi-modal dataset across a set of patients and are ready to preserve known linkages in a CHoRUS-standard format.</p>
<p><img decoding="async" loading="lazy" alt="Multimodal Linkage Workflow" src="/Chorus_SOP/assets/images/MMLinkage_Overview-33b551e6aaa15da04664435f6e2f4532.png" width="2122" height="1582" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-file-organization">A: FILE ORGANIZATION<a href="#a-file-organization" class="hash-link" aria-label="Direct link to A: FILE ORGANIZATION" title="Direct link to A: FILE ORGANIZATION">​</a></h2>
<p>The ways in which data are organized has been defined by the Data Acquisition team and is defined in the Data-Upload-Update SOP. Further specification about the formatting of filenames will be covered in format-specific SOPs found in this documentation site.</p>
<p>This organizational structure has been modified from the original Upload SOP, such that structured EHR data in OMOP CDM format are no longer included in the per-person file structure, as was recommended previously.</p>
<p>The structure shown in Section A in the diagram above represents the most up-to-date version of the organization in which sites are expected to deliver data.</p>
<ul>
<li>Note that the directory labeled &#x27;root&#x27; in the &#x27;Release&#x27; section can either be a dated release directory (if your site chooses to retain all files in each release in individual dirs) or it could be a naming convention of your choice.</li>
</ul>
<p>The [data upload/update SOP] will provide additional details on this directory structure and the creation of an associated upload manifest.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="b-registry-construction">B: REGISTRY CONSTRUCTION<a href="#b-registry-construction" class="hash-link" aria-label="Direct link to B: REGISTRY CONSTRUCTION" title="Direct link to B: REGISTRY CONSTRUCTION">​</a></h2>
<p>The files listed in both the Images and Waveform subdirectories will need to be processed individually by sites for reasons that include re-organization, date shifting, removal of PHI (and verification of absence), etc.</p>
<p>During this processing, sites should construct two tabular <em>REGISTRIES</em> that contain a <strong>SINGLE ROW PER FILE</strong> with data relevant to linking those files (1) together via session/accession, and (2) to data from other modalities.</p>
<p>These registries should contain the following columns:</p>
<ul>
<li><strong>file_id</strong>
<ul>
<li>Unique identifier pertaining to the file.</li>
<li>Could be a hash, or any other identifier you would like.</li>
<li>Should be unique (e.g. primary key) within registry table.</li>
<li>Collisions across registry tables are discouraged but do not break the model</li>
</ul>
</li>
<li><strong>proc_id</strong>
<ul>
<li>In the example shown in the diagram above, image files are assigned procedure identifiers between 2000000000 and 2000999999, and waveform files are assigned procedure identifiers greater than 2001000000</li>
<li>The cardinality may not match <em>file_id</em> (e.g. multiple distinct <em>file_id</em> values could be associated with a single <em>proc_id</em> value)<!-- -->
<ul>
<li>Information regarding organizational structures for waveform and imaging files, sessions, and studies will follow in those SOPs, respectively</li>
</ul>
</li>
<li>Must not overlap with other <em>procedure_occurrence_id</em> values assigned to EHR-derived procedures</li>
<li><em>DATATYPE</em>: integer or bigint</li>
</ul>
</li>
<li><strong>person_id</strong>
<ul>
<li><em>person_id</em> value associated with the patient in your <strong>OMOP</strong> dataset. This id should also match the name of that files parent directory</li>
<li><em>DATATYPE</em>: integer or bigint</li>
</ul>
</li>
<li><strong>group_id</strong>
<ul>
<li>Identifier that pertains to some grouping of files (e.g. session, accession, recording, etc.)</li>
<li>This column is flexible to accommodate different formats and in-house grouping strategies, but it should enable relevant connections between rows in your registries</li>
<li><em>DATATYPE</em>: string</li>
</ul>
</li>
<li><strong>visit_id</strong>
<ul>
<li><em>visit_occurrence_id</em> value associated with the associated encounter recorded in your <strong>OMOP</strong> dataset.</li>
<li>IF you don&#x27;t have an explicit link between your file and an encounter identifier, you should infer the visit based on datetime (i.e. select the visit for the given patient that overlaps with the timestamp of the file capture)<!-- -->
<ul>
<li>IF there is no visit for that patient that overlaps with the file&#x27;s timestamp (e.g. file was captured during an outpatient visit outside of OMOP) <strong>LEAVE THIS FIELD NULL</strong></li>
</ul>
</li>
<li><em>DATATYPE</em>: integer or bigint</li>
</ul>
</li>
<li><strong>datetime</strong>
<ul>
<li>Timestamp of the point at which the file was captured, within the <strong>LOCAL</strong> timezone</li>
<li>IF your site is shifting dates for EHR data prior to delivery, this field should represent the <strong>SHIFTED</strong> timestamp rather than the original timestmap</li>
<li><em>DATATYPE</em>: timestamp (local TZ)</li>
</ul>
</li>
<li><strong>src_file</strong>
<ul>
<li>Name and path of the source file in your data storage system, to enable traceback and quality control</li>
<li><em>DATATYPE</em>: string</li>
</ul>
</li>
<li><strong>trg_file</strong>
<ul>
<li>Name and path of the renamed file to be delivered with your extract, following the [naming convention] defined by the Data Acquisition team</li>
<li><em>DATATYPE</em>: string</li>
</ul>
</li>
</ul>
<p>The registries that you produce should be delivered as CSV files, along with your extract, inside the <strong>RELEASE</strong> directory.</p>
<blockquote>
<p>[!NOTE]
We will eventually add columns to these registries that contain information about the ways in which the files were captured.
This information will then be used to map files to <strong>procedure_concept_id</strong> values with additional granularity (e.g. ECG instead of Monitoring Procedure).
Provisionally, all rows in the <em>IMAGE REGISTRY</em> should be mapped to a <strong>procedure_concept_id</strong> of 4180938 (Imaging Procedure).
All rows in the <em>WAVEFORM REGISTRY</em> should be mapped to a <strong>procedure_concept_id</strong> of 4141651 (Monitoring Procedure)</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="c-omop-integration">C: OMOP INTEGRATION<a href="#c-omop-integration" class="hash-link" aria-label="Direct link to C: OMOP INTEGRATION" title="Direct link to C: OMOP INTEGRATION">​</a></h2>
<blockquote>
<p>[!WARNING]
The <strong>procedure_occurrence_id</strong> field serves a different purpose than the <strong>procedure_concept_id</strong> field.
<strong>procedure_occurrence_id</strong> is a unique identifier for a given row in the <a href="https://ohdsi.github.io/CommonDataModel/cdm54.html#procedure_occurrence" target="_blank" rel="noopener noreferrer">PROCEDURE_OCCURRENCE table</a>, while
<strong>procedure_concept_id</strong> is a <a href="https://athena.ohdsi.org/search-terms/terms?standardConcept=Standard&amp;page=1&amp;pageSize=15&amp;query=" target="_blank" rel="noopener noreferrer">standard concept in the OMOP vocabulary</a> that denotes a particular medical procedure.
This distinction is critical in understanding how OMOP entities are created from the two file registries.</p>
</blockquote>
<p>After creating the two registries, you should be able to use them directly to create rows in your OMOP PROCEDURE_OCCURRENCE table, <a href="https://github.com/chorus-ai/MIMIC/blob/fcb9b22ef13424f04a65e612eaf2ffe1d72485ea/etl/src/etl/mimic.py#L416" target="_blank" rel="noopener noreferrer">as was done for the MIMIC dataset</a></p>
<p>Correspondence between the registry columns and PROCEDURE_OCCURRENCE columns are shown in color in SECTION C of the diagram above.</p>
<p>As was mentioned above in <strong>B</strong>, there are several important constraints to maintain during this integration:</p>
<ol>
<li><em>person_id</em> values should reference the appropriate patient in the PERSON table, and those values should also correspond with the person-level directory name in your extract organization</li>
<li><em>visit_occurrence_id</em> values should reference the appropriate encounter in the VISIT_OCCURRENCE table</li>
<li><em>procedure_occurrence_id</em> values should be distinct <strong>PER PROCEDURE</strong> and should not overlap with other procedure events in the PROCEDURE_OCCURRENCE table. It could be the case that multiple files/rows in the registry are associated with a single <em>procedure_occurrence_id</em> value.</li>
<li><em>procedure_concept_id</em> values should either be set to <strong>4180938</strong> (Imaging Procedure) for images, or <strong>4141651</strong> (Monitoring Procedure) for waveform files. <strong>NOTE</strong> that after this first implementation, we will suggest that sites map their imaging and waveforms with additional granularity. Any code needed to create the registries should be flexible to accommodate (sub)modality procedure mappings in the future.</li>
<li><em>procedure_source_value</em> values should include a concatenated representation of (1) the target file path/name and (2) the group identifier associated with the particular file, should there be one.</li>
</ol>
<ul>
<li>We suggest that you concatenate these items as key<!-- -->:value<!-- --> pairs (e.g. &quot;path: /some/file/path, group: [somegroupid])</li>
</ul>
<p>* Note that the <strong>procedure_type_concept_id</strong> field refers to the provenance of the data. The current vocabulary does not fully support this use case; in the interim, you can use <a href="https://athena.ohdsi.org/search-terms/terms/32880" target="_blank" rel="noopener noreferrer">standard algorithm</a>, but we are investigating the minting of a new term in the <strong>Type Concept</strong> domain that accurately captures these linkage events.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="d-analytics-integration">D: ANALYTICS INTEGRATION<a href="#d-analytics-integration" class="hash-link" aria-label="Direct link to D: ANALYTICS INTEGRATION" title="Direct link to D: ANALYTICS INTEGRATION">​</a></h2>
<p>The newly created rows in your OMOP CDM data allow for OMOP-specific cohort selection routines to isolate and capture non-tabular data forms.</p>
<p>Eventually, we will implement a data structure using OMOP extension tables that enables both the data capture procedure, and features extracted from the resulting data, to be organized alongside other OMOP data.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supplementary-material">SUPPLEMENTARY MATERIAL<a href="#supplementary-material" class="hash-link" aria-label="Direct link to SUPPLEMENTARY MATERIAL" title="Direct link to SUPPLEMENTARY MATERIAL">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mimic-approach">MIMIC Approach<a href="#mimic-approach" class="hash-link" aria-label="Direct link to MIMIC Approach" title="Direct link to MIMIC Approach">​</a></h3>
<p>We have created and shared a <a href="https://github.com/chorus-ai/MIMIC/tree/main" target="_blank" rel="noopener noreferrer">preliminary codebase for the MIMIC dataset</a> that includes the following:</p>
<ul>
<li><a href="https://github.com/chorus-ai/MIMIC/blob/main/README.md" target="_blank" rel="noopener noreferrer">Description</a> of registry creation and motivation</li>
<li><a href="https://github.com/chorus-ai/MIMIC/blob/fcb9b22ef13424f04a65e612eaf2ffe1d72485ea/etl/src/etl/mimic.py#L233" target="_blank" rel="noopener noreferrer">Function</a> to parse, transform, and rename imaging files</li>
<li><a href="https://github.com/chorus-ai/MIMIC/blob/fcb9b22ef13424f04a65e612eaf2ffe1d72485ea/etl/src/etl/mimic.py#L285" target="_blank" rel="noopener noreferrer">Function</a> to parse, transform, and rename waveform files</li>
<li><a href="https://github.com/chorus-ai/MIMIC/blob/fcb9b22ef13424f04a65e612eaf2ffe1d72485ea/etl/src/etl/mimic.py#L390" target="_blank" rel="noopener noreferrer">Function</a> to create dynamic insert SQL statements that insert rows into the PROCEDURE_OCCURRENCE table using the registry tables</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/chorus-ai/Chorus_SOP/edit/review/sop-website/docs/Multimodal-Linkage/Multimodal-Linkage.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-28T19:21:11.000Z">Oct 28, 2025</time></b> by <b>Jared Houghtaling</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Chorus_SOP/docs/category/multimodal-linkage"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Multimodal Linkage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Chorus_SOP/docs/category/omop-mapping"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">OMOP Mapping</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-file-organization" class="table-of-contents__link toc-highlight">A: FILE ORGANIZATION</a></li><li><a href="#b-registry-construction" class="table-of-contents__link toc-highlight">B: REGISTRY CONSTRUCTION</a></li><li><a href="#c-omop-integration" class="table-of-contents__link toc-highlight">C: OMOP INTEGRATION</a></li><li><a href="#d-analytics-integration" class="table-of-contents__link toc-highlight">D: ANALYTICS INTEGRATION</a></li><li><a href="#supplementary-material" class="table-of-contents__link toc-highlight">SUPPLEMENTARY MATERIAL</a><ul><li><a href="#mimic-approach" class="table-of-contents__link toc-highlight">MIMIC Approach</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Chorus_SOP/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chorus4ai.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homesite<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/CHoRUS4AI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Chorus_SOP/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Chorus-AI, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>